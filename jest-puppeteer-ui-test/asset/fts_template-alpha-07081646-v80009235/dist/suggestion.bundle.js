(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{1415:function(t,e,s){},1416:function(t,e,s){},1417:function(t,e,s){},1418:function(t,e,s){},1419:function(t,e,s){},1420:function(t,e,s){},2082:function(t,e,s){"use strict";s(1415)},2083:function(t,e,s){"use strict";s(1416)},2084:function(t,e,s){"use strict";s(1417)},2085:function(t,e,s){"use strict";s(1418)},2086:function(t,e,s){"use strict";s(1419)},2087:function(t,e,s){"use strict";s(1420)},2211:function(t,e,s){"use strict";s.r(e);var i=s(1),n=s.n(i),a=s(0),o=s(22),r=s(52),c=s(2),u=s(7),p={mixins:[a.j,a.l],props:{data:{type:Object},item:{type:Object,default:function(){return{}}},type:{type:Number,default:0},pos:{type:Number,default:0},typePos:{type:Number,default:0},ts:{type:Number,default:0}},data:function(){return{}},computed:{reportId:function(){return"".concat(this.typePos,"|").concat(this.data.title||"","|").concat(this.type,"|").concat(this.pos,"|").concat(this.item.word)},word:function(){return this.item.wordHighlight||this.item.word},weakTag:function(){return this.item.tagInfo&&2===this.item.tagInfo.showType?this.item.tagInfo:null},strongTag:function(){return this.item.tagInfo&&1===this.item.tagInfo.showType?this.item.tagInfo:null}},methods:{onTapSuggestionSearch:function(){var t=this,e=t.M_composeParentSid({t:c.n.SUG,s:t.$store.state.sug.sugId,did:t.item.word}),s={scene:a.b.scene,businessType:a.b.type,docId:t.item.word,docPos:t.pos,typePos:t.typePos,query:t.item.word,suggestionId:t.$store.state.sug.sugId,resultType:t.item.showType||0,expand:"suggestion",expand1:new Date-t.ts,searchId:""};Object(r.e)(s),t.M_checkSpecialSearchBeforeLaunchNewSearch({query:t.item.word,callback:function(){a.f.setSearchInputWord({query:t.item.word,isInputChange:!1}),u.a.$emit(u.b.GOTO,{page:c.f.RESULT,query:t.item.word,action:c.m.SUG_CLICK,extReqParams:{key:"parentSearchID",textValue:e},searchId:""})},extParams:{crossExtReqParams:[{key:"parentSearchID",textValue:e}]}},s),a.e.suggestion.reportCommonClick(this.reportId),Object(o.f)(a.k.feature.sug),a.e.reportEventTrack({actionType:18,query:t.item.word})},onTapSuggestionAddto:function(){var t=this;a.f.setSearchInputWord({query:t.item.word,isInputChange:!0}),a.e.suggestion.reportCommonClick(this.reportId),Object(r.e)({scene:a.b.scene,businessType:a.b.type,docId:t.item.word,docPos:t.pos,typePos:t.typePos,expand:"suggestionAttach",suggestionId:t.$store.state.sug.sugId,resultType:t.item.showType||0,searchId:""}),Object(o.f)(a.k.feature.sugAdd)}}},l=(s(2082),s(32)),d=Object(l.a)(p,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"sug__simple",attrs:{"data-sug-id":t.reportId},on:{click:t.onTapSuggestionSearch}},[s("div",{staticClass:"line"},[s("svg-icon",{attrs:{"aria-hidden":"true","class-name":"sug__simple-icon line__item no-shrink",name:"magnifier"}}),t._v(" "),s("div",{staticClass:"line line__item primary",attrs:{role:"button"}},[s("p",{staticClass:"line__item",domProps:{innerHTML:t._s(t.xss(t.word))}}),t._v(" "),t.weakTag?s("ui-tag",{staticClass:"line__item no-shrink",staticStyle:{"margin-left":"6px"},attrs:{title:t.weakTag.title,type:t.weakTag.type,"icon-url":t.weakTag.iconUrl,"no-bg":"true"}}):t._e()],1),t._v(" "),t.os.mobile?s("div",{staticClass:"line__item no-shrink",staticStyle:{"margin-left":"12px"},attrs:{role:"button","aria-label":"添加到搜索栏"}},[s("div",{staticClass:"sug__simple-active",on:{click:function(t){t.stopPropagation()},touchend:function(e){return e.stopPropagation(),e.preventDefault(),t.onTapSuggestionAddto.apply(null,arguments)}}},[s("div",{staticClass:"sug__simple-end"})])]):t._e()],1),t._v(" "),t.strongTag?s("div",{staticClass:"line",staticStyle:{"margin-top":"8px"},attrs:{"aria-hidden":"true"}},[s("div",{staticClass:"line__item no-shrink sug__simple-occupy"}),t._v(" "),s("ui-tag",{staticClass:"line__item",attrs:{title:t.strongTag.title,type:t.strongTag.type,"icon-url":t.strongTag.iconUrl,size:"big","no-bg":"true"}})],1):t._e()])}),[],!1,null,null,null).exports,m=s(106),h=s(13);function g(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,i)}return s}function y(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?g(Object(s),!0).forEach((function(e){n()(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):g(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var f={mixins:[a.l],props:{data:{type:Object},item:{type:Object,default:function(){return{}}},type:{type:Number,default:0},pos:{type:Number,default:0},typePos:{type:Number,default:0},ts:{type:Number,default:0}},computed:{reportId:function(){return"".concat(this.typePos,"|").concat(this.data.title||"","|").concat(this.type,"|").concat(this.pos,"|").concat(this.item.word||this.item.sub)},sub:function(){return this.item.subHighlight||this.item.sub},word:function(){return this.item.wordHighlight||this.item.word}},methods:{tap:function(){var t=this;m.a.isSupportOpenView_8?h.b.openView(y(y({},a.b.getBase()),{},{actionType:8,jumpUrl:t.item.jumpUrl,query:t.item.word})):t.M_go(Object.assign({docId:t.item.word},t.item)),a.e.suggestion.reportCommonClick(this.reportId),Object(r.e)({scene:a.b.scene,businessType:a.b.type,docId:t.item.sub||"",docPos:t.pos,typePos:t.typePos,query:t.item.word,suggestionId:t.$store.state.sug.sugId,resultType:t.item.showType||0,expand:"suggestion",expand1:new Date-t.ts}),Object(o.f)(a.k.feature.sugH5),a.e.reportEventTrack({actionType:18,query:t.item.word})}}},b=(s(2083),{components:{simple:d,external:Object(l.a)(f,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"line with-arrow sug__simple sug__external",attrs:{"data-sug-id":t.reportId,role:"button"},on:{click:t.tap}},[s("div",{staticClass:"line__item",attrs:{"aria-hidden":"true"}},[s("svg-icon",{staticClass:"sug__simple-icon",attrs:{name:"link"}})],1),t._v(" "),s("div",{staticClass:"line__item primary"},[t.word?s("div",{staticClass:"line"},[s("div",{staticClass:"line__item"},[s("p",{domProps:{innerHTML:t._s(t.xss(t.word))}})]),t._v(" "),t.item.tag?s("div",{staticClass:"line__item",attrs:{"aria-hidden":"true"}},[s("span",{staticClass:"tag gold"},[t._v("\n          "+t._s(t.item.tag)+"\n        ")])]):t._e()]):t._e(),t._v(" "),s("p",{staticClass:"sug__external-sub"},[t._v("\n      "+t._s(t.sub)+"\n    ")])])])}),[],!1,null,null,null).exports},props:{data:{type:Object},item:{type:Object,default:function(){return{}}},type:{type:Number,default:0},pos:{type:Number,default:0},typePos:{type:Number,default:0},ts:{type:Number,default:0},index:{type:Number,default:0}},methods:{tap:function(){1===this.item.showType?this.$refs.GeneralSug.tap():this.$refs.GeneralSug.onTapSuggestionSearch()}}}),_=(s(2084),Object(l.a)(b,(function(){var t=this.$createElement,e=this._self._c||t;return 1===this.item.showType?e("external",this._b({ref:"GeneralSug"},"external",this.$props,!1)):e("simple",this._b({ref:"GeneralSug"},"simple",this.$props,!1))}),[],!1,null,null,null).exports),v=s(95),S=s(4),I={mixins:[a.l,a.j],props:["data","item","type","tapCb","pos","typePos","index"],data:function(){return{isActive:!1,isVerify:!1,isTradmarkProtection:!1}},computed:{reportId:function(){return"".concat(this.typePos,"|").concat(this.data.title||"","|").concat(this.type,"|").concat(this.pos,"|").concat(this.item.nickName)}},methods:{onTap:function(){var t=this,e=t.item.nickName,s={scene:a.b.scene,businessType:a.b.type,docId:e,docPos:t.pos,typePos:t.typePos,clickType:1,suggestionId:t.$store.state.sug.sugId,searchId:""};if(Object(r.e)(s),t.item.jumpInfo)t.M_go(t.item.jumpInfo);else if(a.b.type==S.c.OFFICE_ACCOUNT||3==this.item.opType)t.M_jump(Object.assign(this.item,{type:1,bizuin:this.item.bizuin||this.item.docID,opType:this.item.opType||c.c.bizSession,query:a.b.query,searchId:a.b.searchId,extraParams:"from_sug=1&search_type=1&docid=".concat(decodeURIComponent(this.item.docID),"&scene=").concat(a.b.scene),reportDocId:e}));else{t.$store.commit({type:"result/updateMoment",tagInfo:{tagType:c.o.BIZFEEDS,tagText:""},matchUser:{matchWord:e,userName:t.item.docID},nextObjID:"",tagList:[{tagName:e,tagType:c.o.BIZFEEDS}]});var i=t.M_composeParentSid({t:c.n.SUG,s:t.$store.state.sug.sugId,did:e});t.M_checkSpecialSearchBeforeLaunchNewSearch({query:e,callback:function(){a.b.setValue({custom:""}),a.f.setSearchInputWord({query:e,custom:"",tagList:[{tagName:e,tagType:c.o.BIZFEEDS,userName:t.item.userName}],isInputChange:!1}),a.a.$emit(a.i.GOTO,{page:c.f.RESULT,query:e,extReqParams:{key:"parentSearchID",textValue:i},action:c.m.SUG_BIZ_CLICK,searchId:""})},extParams:{crossExtReqParams:[{key:"parentSearchID",textValue:i}]}},s)}Object(o.d)(v.a.detail.suggestion.suggestionItemBiz),a.e.suggestion.reportCommonClick(this.reportId)},onTapContact:function(){a.a.$emit(a.i.RESET_MOMENT_FILTER);var t=this,e=t.item.nickName;t.$store.commit({type:"result/updateMoment",nextObjID:"",tagInfo:{tagType:c.o.SNSALBUM,tagText:""},matchUser:{matchWord:e,userName:t.item.userName},tagList:[{tagName:e,tagType:c.o.SNSALBUM}]});var s=t.M_composeParentSid({t:c.n.SUG,s:t.$store.state.sug.sugId,did:e}),i={scene:a.b.scene,businessType:a.b.type,docId:e,docPos:t.pos,typePos:t.typePos,clickType:1,suggestionId:t.$store.state.sug.sugId,searchId:""};Object(r.e)(i),t.M_checkSpecialSearchBeforeLaunchNewSearch({query:e,callback:function(){a.f.setSearchInputWord({query:e,custom:"",tagList:[{tagName:e,tagType:c.o.SNSALBUM,userName:t.item.userName}],isInputChange:!1}),a.b.custom="",a.a.$emit(a.i.GOTO,{page:c.f.RESULT,query:e,extReqParams:{key:"parentSearchID",textValue:s},action:c.m.SUG_CONTACT_CLICK,searchId:""})},extParams:{crossExtReqParams:[{key:"parentSearchID",textValue:s}]}},i),Object(o.d)(v.a.detail.suggestion.suggestionItemContact),a.e.suggestion.reportCommonClick(this.reportId)},tap:function(){3===this.type?this.onTapContact():this.onTap()}}},T=Object(l.a)(I,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return 3==t.type?s("div",{staticClass:"weui-cell sug_biz",class:{active:t.isActive},attrs:{"data-sug-id":t.reportId,role:"button"},on:{click:t.onTapContact}},[s("div",{staticClass:"weui-cell_hd"},[s("client-image",{key:t.item.userName,staticClass:"sug__moment-thumb",attrs:{item:t.item,type:8}})],1),t._v(" "),s("div",{staticClass:"weui-cell__bd biz_item"},[s("h4",{domProps:{innerHTML:t._s(t.xss(t.item.nickNameHighlight||t.item.nickName))}}),t._v(" "),t.item.extraHighlight?s("p",{staticClass:"biz_account_tips",domProps:{innerHTML:t._s(t.xss(t.item.extraHighlight))}}):t._e()])]):s("div",{staticClass:"weui-cell sug_biz",class:{active:t.isActive},attrs:{docid:t.item.docID,"data-sug-id":t.reportId,role:"button"},on:{click:t.onTap}},[s("div",{staticClass:"weui-cell_hd"},[s("div",{directives:[{name:"image",rawName:"v-image",value:t.item.iconUrl,expression:"item.iconUrl"}],staticClass:"sug__biz-thumb"})]),t._v(" "),s("div",{staticClass:"weui-cell__bd biz_item"},[s("h4",{domProps:{innerHTML:t._s(t.xss(t.item.nickNameHighlight||t.item.nickName))}}),t._v(" "),t.item.extraHighlight?s("p",{staticClass:"biz_account_tips",domProps:{innerHTML:t._s(t.xss(t.item.extraHighlight))}}):t._e()])])}),[],!1,null,null,null).exports,w={mixins:[a.l],props:{data:{type:Object,default:function(){return{}}},item:{type:Object,default:function(){return{}}}},data:function(){return{fixed:!1}},mounted:function(){this._calculateHeight()},methods:{_calculateHeight:function(){var t=this.$parent.$parent.$el.clientHeight,e=this.$el.clientHeight,s=a.f.getWindowHeight();this.fixed=t+e<s},tap:function(){this.M_go(this.item)}}},x=(s(2085),Object(l.a)(w,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"sug-complaint",class:{fixed:this.fixed}},[e("span",{directives:[{name:"active",rawName:"v-active"}],staticClass:"active__opacity",attrs:{role:"link"},on:{click:this.tap}},[this._v("\n    "+this._s(this.item.word)+"\n  ")])])}),[],!1,null,null,null).exports),C=s(14),O=new C.a({complaint:1}),P={components:{complaint:x},props:{data:{type:Object,default:function(){return{}}}},data:function(){return{types:O}}},j=(s(2086),Object(l.a)(P,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"sug-bottom"},t._l(t.data.items,(function(e,i){return s(t.types[e.type],t._b({key:i,tag:"components",attrs:{item:e}},"components",t.$props,!1))})),1)}),[],!1,null,null,null).exports),k=s(1296),D=s.n(k),q=s(44),$=s(34),E=new C.a({WORD:1,BIZ:2,CONTACT:3,HISTORY:4}),N={requestType:new C.a({net:0,local:1}),sugType:E};Object.freeze(N);var L=s(699);function R(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,i)}return s}function A(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?R(Object(s),!0).forEach((function(e){n()(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):R(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var H={components:{general:_,contactSug:T,bottom:j},mixins:[a.l],props:{selectIndex:{type:Number,default:-1}},data:function(){return{isShow:!1,dataReadyTs:0,deviceType:a.b.deviceType,isKeybordShow:!0}},computed:{suggestoinObj:function(){return this.$store.state.sug.data},bottom:function(){var t=this,e=this,s=e.$store.state.sug.bottom;return s&&s.items&&s.items.length&&s.items.forEach((function(s){if(1==s.type&&s.jumpUrl&&!s.jumpUrl.includes("relatedWords")){var i=[];t.suggestoinObj.map((function(t){t.items&&t.items.length&&(i=i.concat(t.items.map((function(t){return t.word}))))})),s.jumpUrl=e.M_composeUrl(s.jumpUrl,{relatedWords:i.join("|")})}})),s}},watch:{$route:function(t){t.name===c.f.SUG?this.$store.dispatch({type:"sug/handleSug",data:{}}):t.name!==c.f.INDEX&&t.name!==c.f.TEACH||this.$store.commit({type:"sug/updateState",sugSession:null})}},created:function(){var t=this,e=this;e.query="",e.lastQuery="",e.inputFinishTimestamp=+new Date,e.preGetSearchDataTimeout=null,e.preGetSearchDataArgs="",e.preGetSearchDataResolve=null;var s=e.$route.params.option,i=void 0===s?{}:s;i.query&&e.getData({query:i.query}),q.b.onInputChange((function(s){t.isKeybordShow=!0,e.inputFinishTimestamp=+new Date,s.query&&(e.getData(s),m.a.isSupportSugPreSearchOnInputChange&&e._preGetSearchData()),e.$store.commit("result/updateCacheArgs",null),e.$store.commit("result/updateCachePromise",null)})),q.b.onInputConfirm((function(s){clearTimeout(e.preGetSearchDataTimeout),a.e.reportEventTrack({actionType:17,timeStamp:e.inputFinishTimestamp,query:s.query||a.b.query}),t.$store.commit({type:"sug/updateState",sugSession:{type:2,sessionId:"sug_sid_".concat(Date.now())}})})),a.b.os.pc&&(a.a.$on(a.i.VERT_CHANGE,e.clearData),a.a.$on(a.i.TAB_SWITCH,e.clearData)),q.b.onSugReady((function(t){e.$store.dispatch({type:"sug/handleSug",data:t}),e.reportSugSession(),m.a.isSupportSugPreSearchOnInputChange||e._preGetSearchData(),e.dataReadyTs=+new Date,setTimeout((function(){e.expose&&(e.expose.resetExposeId(),e.expose.analysis())}))})),q.b.onResultReady((function(t){t.requestId&&t.requestId===e.preGetSearchDataArgs.requestId&&(e.$store.commit("result/cacheResultData",t),e.preGetSearchDataResolve(t))}))},mounted:function(){var t=this,e=this;e.expose=null,this.$nextTick().then((function(){t.expose||(e.expose=new L.Expose((function(t){t.length&&a.e.suggestion.reportCommonExpose(t)}),{container:e.$el,attr:"data-sug-id"}))}))},activated:function(){this.$store.state.sug.sugSession||this.$store.commit({type:"sug/updateState",sugSession:{type:1,sessionId:"sug_sid_".concat(Date.now())}})},methods:{handleTouchmove:function(){[c.e.S1S,c.e.GLOBAL_HISTORY,c.e.GLOBAL,c.e.KEYBORD_PRELOAD].includes(a.b.scene)&&a.b.os.android&&this.isKeybordShow&&(q.a.setInputBar({query:a.b.query,isInputChange:!1}),this.isKeybordShow=!1)},reportSugSession:function(){var t=(this.$store.state.sug.sugSession||{}).sessionId,e=this.$store.state.sug.sugId,s=this.deviceType;e&&q.a.getCommonCgiData({cgiName:$.a.mmDataReport,data:{clientversion:Number(a.b.clientVersion),device:s,item_list:[{logid:24687,log_buffer:["",e,a.b.scene,a.b.isHomePage,a.b.type,t].join(",")}]}})},hide:function(){this.isShow=!1,this.styleObject={height:0,opacity:0}},getData:function(t){var e=Object.assign({query:a.b.query},t);this.getSearchSuggestionData(e),this.lastQuery=this.query,this.query=e.query},clearData:function(){this.$store.commit("sug/updateState",{data:[]})},_preGetSearchData:function(){var t=this;t.lastQuery!==t.query&&!/\w/.test(t.query)&&t.query.length>1&&a.b.preSearchSwitch&&(clearTimeout(t.preGetSearchDataTimeout),t.preGetSearchDataTimeout=setTimeout((function(){t.preGetSearchData(t.query)}),100))},getSearchSuggestionData:function(t){q.a.getSug({scene:a.b.scene,version:a.b.version,query:t.query||"",type:a.b.type,isHomePage:a.b.isHomePage,requestType:t.requestType||8===a.b.type&&N.requestType.local,sugId:"",sessionId:a.b.sessionId})},preGetSearchData:function(t){var e=this,s=e.$store.state.result;if(!s.self.base.isLoading){var i=a.f.generateGuuId(),n=[{key:"netType",textValue:a.b.netType},{key:"subType",uintValue:+a.b.subType,textValue:a.b.subType?"".concat(a.b.subType):""},{key:"currentPage",uintValue:1},{key:"requestId",textValue:i},{key:"cookies",textValue:s.state.cookies},{key:"widgetVersion",uintValue:+D.a.version}].concat(a.b.crossExtReqParams),o=Object.assign(A(A({},a.b.getBase()),{},{query:t||"",offset:0,tagInfo:e.$store.getters["result/tagInfo"],type:a.b.type,isHomePage:a.b.isHomePage,subType:a.b.subType,sceneActionType:c.p.PRE_SEARCH,matchUser:e.$store.getters["result/matchUser"],numConditions:s.moment.numConditions,extReqParams:n,requestId:i,fromTagSearch:a.b.queryString.fromTagSearch,extClientParams:a.b.queryString.extClientParams,isBackButtonClick:!0}),{parentSearchID:"",sugId:""});q.a.getResult(o),e.preGetSearchDataArgs=o,e.$store.commit("result/cacheResultData",{}),e.$store.commit("result/updateCacheArgs",e.preGetSearchDataArgs),e.$store.commit("result/updateCachePromise",new Promise((function(t){e.preGetSearchDataResolve=t}))),a.e.reportEventTrack(Object.assign({actionType:3,requestId:i,isPreload:100},o))}},getListIndex:function(t,e){return t?e+this.suggestoinObj.slice(0,t).reduce((function(t,e){var s=e.items;return t+(void 0===s?[]:s).length}),0):e},tapIndex:function(t){this.$refs.SugItem.find((function(e){return e.index===t})).tap()}}},G=(s(2087),Object(l.a)(H,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"suggestion-list",on:{touchmove:t.handleTouchmove}},[t._l(t.suggestoinObj,(function(e,i){return s("div",{key:i,staticClass:"weui-cells suggestion-section",style:{marginTop:t.os.mobile&&i>0?"5px":0}},[e.title?s("div",{staticClass:"weui-cells_title"},[t._v("\n      "+t._s(e.title)+"\n    ")]):t._e(),t._v(" "),t._l(e.items,(function(n,a){return[1==e.type||4==e.type?s("general",{key:a+""+i,ref:"SugItem",refInFor:!0,class:{active:t.selectIndex===t.getListIndex(i,a)},attrs:{index:t.getListIndex(i,a),data:e,item:n,type:e.type,pos:a+1,"type-pos":i+1,ts:t.dataReadyTs}}):t._e(),t._v(" "),2==e.type||3==e.type?s("contactSug",{key:a+""+i,ref:"SugItem",refInFor:!0,class:{active:t.selectIndex===t.getListIndex(i,a)},attrs:{index:t.getListIndex(i,a),data:e,item:n,type:e.type,pos:a+1,"type-pos":i+1}}):t._e()]}))],2)})),t._v(" "),t.os.mobile&&t.bottom?s("bottom",{attrs:{data:t.bottom}}):t._e()],2)}),[],!1,null,null,null));e.default=G.exports},699:function(t,e,s){"use strict";s.r(e),s.d(e,"Expose",(function(){return o}));var i=s(7),n=!1;try{var a={get passive(){return n={passive:!0},!0}};window.addEventListener("test",a,a),window.removeEventListener("test",a,a)}catch(t){n=!1}function o(t,e){var s=this;if("function"!=typeof t)throw"Expose must give a handler function.";(e=Object.assign({isBindScrollAtContainer:!1,isBindScrollAtParent:!1,container:document.body,exposeRepeatedly:!1,isHorizontal:!1,attr:"data-expose-id",ensureWithinContainer:!1},e)).container=e.container?e.isBindScrollAtParent&&e.container.parentElement||e.container:document.body,this.opt=e,this.timeout=null,this.exposedId=[],this.handler=t,this.isFirst=!0,this.onScroll=function(){clearTimeout(s.timeout),s.timeout=setTimeout((function(){s.analysis()}),e.dur||200)},this.resetExposeId=function(t){s.exposedId=[],s.isFirst=!0},e.isBindScrollAtContainer?e.container.addEventListener("scroll",this.onScroll,n):window.addEventListener("scroll",this.onScroll,n),i.a.$on(i.b.newSearchArrived,this.resetExposeId)}o.prototype.analysis=function(t){this.bounceW=window.innerWidth,this.bounceH=window.innerHeight,t&&(this.opt.attr=t);for(var e=this.opt.container.querySelectorAll("[".concat(this.opt.attr,"]")),s=[],i={height:{}},n=this.opt.container.getBoundingClientRect(),a=0,o=e.length;a<o;++a){var r=e[a],c=r.getBoundingClientRect(),u=+r.getAttribute("data-expose-ratio")||1,p=r.getAttribute(this.opt.attr);if(p&&(c.left+c.right!==0&&c.top+c.bottom!==0)){if(c.height>=this.bounceH&&(u=.5),this.opt.ensureWithinContainer){var l=Math.max(c.left,n.left),d=Math.max(c.top,n.top),m=Math.min(c.left+c.width,n.left+n.width),h=Math.min(c.top+c.height,n.top+n.height);if(l>=m||d>=h)continue;if(c.width*c.height*u>(m-l)*(h-d))continue}var g="data-id"==this.opt.attr&&this.isFirst;(g||Math.floor(c.left+c.width*u)<=this.bounceW&&Math.floor(c.top+c.height*u)<=this.bounceH)&&(g&&(this.isFirst=!1),this.exposedId.includes(p)||(this.exposedId.push(p),s.push(p)),i.height[p]=c.height)}}this.handler(s,i)},o.prototype.destory=function(){i.a.$off(i.b.newSearchArrived,this.resetExposeId),this.opt.isBindScrollAtContainer?this.opt.container.removeEventListener("scroll",this.onScroll,!1):window.removeEventListener("scroll",this.onScroll,!1)}}}]);